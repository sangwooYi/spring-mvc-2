<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Spring EL 표현식</h1>
<h2>참고로 DTO 의 필드가 private라도 그냥 타임리프는 .username 이렇게 꺼낼 수 있음</h2>
<ul>
    <li>${user.username} = <span th:text="${user.username}"></span></li>
    <li>${user['username']} = <span th:text="${user['username']}"></span></li>
    <li>${user.getUsername()} = <span th:text="${user.getUsername()}"></span></li>
</ul>
<ul>리스트
    <li>${users[0].username} = <span th:text="${users[0].username}"></span></li>
    <li>${users[0]['username']} = <span th:text="${users[0]['username']}"></span></li>
    <li>${users[0].getUsername()} = <span th:text="${users[0].getUsername()}"></span></li>
</ul>
<!--
th:each 에는 status 라는 두번째 변수를 자동으로 할당해주며 이 변수는 아래와 같은 속성들을 가짐
index 0부터 시작하는 인덱스 status.index
count 1 부터 시작하는 인덱스 status.count
size 전체 컬렉션 크기
current 현재 반복 중인 요소
even/odd 짝수/홀수 번째 여부 (boolean)
first/last 첫 번째/마지막 요소 여부 (boolean)
-->
<h3>리스트 반복 사용 + th:each 에 부여되는 status</h3>
<table>
    <th>| status.index |</th>
    <th>| status.count |</th>
    <th>| status.size |</th>
    <th>| status.current |</th>
    <th>| status.even |</th>
    <th>| status.odd |</th>
    <th>| status.first |</th>
    <th>| status.last |</th>
    <th>| user.username |</th>
    <th>| user.age |</th>
    <tr th:each="user, status  : ${users}">
        <td th:text="${status.index}"></td>
        <td th:text="${status.count}"></td>
        <td th:text="${status.size}"></td>
        <td th:text="${status.current}"></td>
        <td th:text="${status.even}"></td>
        <td th:text="${status.odd}"></td>
        <td th:text="${status.first}"></td>
        <td th:text="${status.last}"></td>
        <td th:text="${user.username}"></td>
        <td th:text="${user.age}"></td>
    </tr>
</table>
<ul> Map 이렇게 Map 으로도 꺼낼 수 있음
    <li>${userMap['userA'].username} = <span th:text="${userMap['userA'].username}"></span></li>
    <li>${userMap['userA']['username']} = <span th:text="${userMap['userA']['username']}"></span></li>
    <li>${userMap['userA'].getUsername()} = <span th:text="${userMap['userA'].getUsername()}"></span></li>
</ul>

<h1>지역변수 선언</h1>
<h3>아래와 같이 th:with 를 사용하면 해당 태그 안에서만 유효한 지역변수 사용 가능 예시 fUser=${users[0]}</h3>
<div th:with="fUser=${users[0]}">
    <p>fUser.username = <span th:text="${fUser.username}"></span></p>
    <p>fUser.age =  <span th:text="${fUser.age}"></span></p>
</div>
<!--
타임리프도 서버사이드렌더링 기술이기 때문에 아래처럼 없는 값을 꽂아주려고 하면
서버에서 예외처리가 발생해 버린다.
<p>지역변수 선언 태그 밖에서 fUser.username <span th:text="${fUser.username}"></span></p>
-->
</body>
</html>